<html>
<head>
<style>
canvas {
	border: 1px solid red;
}
</style>
</head>
<body>
<canvas id="canvas" width="200" height="400" ></canvas>
<script>

canvas = document.getElementById('canvas')
ctx = canvas.getContext('2d')

ctx.translate(0, canvas.height / 2);
ctx.scale(1, -1)

k = -200

fps = 50

animate()

function animate() {

    ctx.clearRect(0, canvas.height / 2, canvas.width, -canvas.height);

    Y = (sine(200, 150)).
    concat(sine(200, 150))
    start = k
    x = start
    ctx.beginPath()
    ctx.moveTo(x, Y[x - start][0])
    x += 1
    while (x - start < Y.length-1) {
        ctx.lineTo(x, Y[x - start][0])
        ctx.stroke()
		
		ctx.beginPath()
		ctx.arc(x, Y[x - start][0], Y[x - start][1], 0, Math.PI*2, true);
		ctx.fill();
        
        ctx.beginPath()
        ctx.moveTo(x, Y[x - start][0])
        x += 1
    }
    ctx.lineTo(x, Y[Y.length-1][0])
    ctx.stroke()

    setTimeout(function () {
        requestAnimationFrame(animate);
    }, 1000 / fps)

    if (k == 0) k = -200
    else k += 1
}

function sine(Period, Amplitute) {
    Y = []
    x = 0
	c=0
    while (x < Period) {
        y = Math.sin(x * 2 * Math.PI / Period) * Amplitute
        if(c==5)c=0
		else c+=1
		Y.push([y,c])
        x += 1
    }
    return Y
}

</script> 
</body>