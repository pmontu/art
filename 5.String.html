<!DOCTYPE html>
<html>
<body>
<canvas id="myCanvas" width="300" height="300" style="border:1px solid #d3d3d3;" onClick="animate()">
Your browser does not support the HTML5 canvas tag.</canvas>
<script>
var canvas = document.getElementById("myCanvas");
var context=canvas.getContext("2d");

var topx = 150;
var topy = 0;
var bottomx = 150;
var bottomy = 300;

var hookleftx = 0;
var hooklefty = 150;
var hookrightx = 300;
var hookrighty = 150;

var fromx = topx;
var fromy = topy;
var tox = bottomx;
var toy;

var fps = 4;

var k=1;
var x = fromx;
var y = fromy;

var direction = 1;

//vibration length ie bottomx-topx must be divisible by evenbreaks
var evenbreaks = 10;
var j1 = 0;
var j2 = 0;
toy = (evenbreaks-1)*(bottomy-topy)/evenbreaks;
//toy = 150 + (bottomy-150)/2;

var steps = 10;
var incrementy = Math.abs(toy-fromy)/steps;

alert(toy);

function draw(x,y,d){

	context.beginPath();
	context.arc(x, y, d, 0, Math.PI*2, true);
	context.fill();
}

function animate(){

	context.clearRect(0,0,canvas.width,canvas.height);

	draw(topx,topy,2);
	draw(bottomx,bottomy,2);
	draw(hookleftx,hooklefty,2);
	draw(hookrightx,hookrighty,2);
	draw(tox,toy,2);
	draw(fromx,fromy,2);
		
	y = incrementy*k;
	//alert(y.toString() + " " + incrementy.toString() + " " + k.toString() + " " + toy.toString());
	
	context.beginPath();
	context.arc(x, y, 3, 0, Math.PI*2, true);
	context.fillStyle = "rgb(1,0,0)";
	context.strokeStyle = "rgb(1,0,0)";
	context.fill();	
	
	if(direction==2){
		k--;
	}
	else if(direction==1){
		k++;		
	}
	if(y>=toy){
		direction = 2;
		k-=2;
		fromy = (++j2)(bottomy-topy)/evenbreaks;
	}
	else if(y<=fromy){
		direction = 1;
		k+=2;
		toy = (evenbreaks-++j1)(bottomy-topy)/evenbreaks;
	}	
	
}

</script>
</body>
</html>
