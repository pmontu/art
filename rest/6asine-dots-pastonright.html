<html>
<head>
<style>
canvas {
        border: 1px solid red;
}
</style>
</head>
<body>
<canvas id="canvas" width="200" height="400" onclick="" ></canvas>
<script>

canvas = document.getElementById('canvas')
ctx = canvas.getContext('2d')

ctx.translate(0, canvas.height / 2);
ctx.scale(1, -1)

fps = 50

P=-200
A=getP()

yp1 = Math.sin(0 * 2 * Math.PI / getP()) * A
yp2 = Math.sin(1 * 2 * Math.PI / getP()) * A

i=2

animate()

function animate() {

    ctx.clearRect(0, canvas.height / 2, canvas.width, -canvas.height);
	
    y = Math.sin(i * 2 * Math.PI / getP()) * A
	
	ctx.beginPath();
	ctx.arc(100, y, 6, 0, Math.PI*2, true);
	ctx.fill();
	ctx.beginPath();
	ctx.arc(99, yp1, 4, 0, Math.PI*2, true);
	ctx.fill();
	ctx.arc(98, yp2, 2, 0, Math.PI*2, true);
	ctx.fill();
	
	yp2=yp1
	yp1=y
	
	if(i==getP()){
		if(P==200)P=-200
		else P+=50
		A=getP()
		i=0
	}
	else i += 1

    setTimeout(function () {requestAnimationFrame(animate);}, 1000 / fps)

}

function getP(){
	return Math.abs(P)
}

</script> 
</body>